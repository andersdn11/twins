function twins(t){this.target=document.getElementById(t),this.state={},this.filters={},this.computed={},this.init=function(){if(null==this.target)return console.error("TWINS: Target ID not found."),!1;var t,i=this;for(t in this.state)this.state.hasOwnProperty(t)&&this.makeReactive(this.state,t);this.target.querySelectorAll("[twins]").forEach(t=>{if(void 0!==t.type){switch(t.type){case"checkbox":case"select-one":case"select-multiple":case"radio":t.addEventListener("change",e);break;default:t.addEventListener("keyup",e)}function e(){i.updateState(t)}}}),this.runComputed(),this.runConditionals(),this.target.removeAttribute("twins-cloak")},this.makeReactive=(e,i)=>{var s=this;let r=e[i];Object.defineProperty(e,i,{get:function(){return r},set:function(t){r=t,s.notify(e,i)}})},this.updateState=t=>{var e=t.getAttribute("twins");let i=t.value;"checkbox"==t.type&&(i=t.checked),this.state[e]=i},this.notify=(i,s)=>{this.target.querySelectorAll('[twins="'+s+'"]').forEach(t=>{var e;null==t.type&&(null!==t.getAttribute("twins-filter")?(e=t.getAttribute("twins-filter"),e=this.filters[e](i[s]),t.innerHTML=e):t.innerHTML=i[s])}),this.runComputed(),this.runConditionals()},this.runComputed=()=>{if(0<Object.keys(this.computed).length)for(var t in this.computed){var i;this.computed.hasOwnProperty(t)&&(i=this.computed[t](),this.target.querySelectorAll('[twins="'+t+'"]').forEach(t=>{var e;null!==t.getAttribute("twins-filter")?(e=t.getAttribute("twins-filter"),e=this.filters[e](i),t.innerHTML=e):t.innerHTML=i}))}},this.runConditionals=()=>{var t=document.querySelectorAll("[twins-if]");if(null==t)return!1;t.forEach(t=>{var e=t.getAttribute("twins-if"),i=!1;e&&0==e.indexOf("!")&&(e=e.substring(1),i=!0);var s=this.state[e];void 0===s&&void 0!==this.computed[e]&&(s=this.computed[e]()),i&&(s=!s),t.style.display=s?"block":"none"})},this.destroy=()=>{}}