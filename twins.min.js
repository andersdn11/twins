function twins(t){this.target=document.getElementById(t),this.state={},this.filters={},this.computed={},this.init=function(){if(null==this.target)return console.error("TWINS: Target ID not found."),!1;for(let t in this.state)this.state.hasOwnProperty(t)&&this.makeReactive(this.state,t);this.target.querySelectorAll("[twins]").forEach(t=>{if(void 0!==t.type)switch(t.type){case"checkbox":case"select-one":case"select-multiple":case"radio":t.addEventListener("change",this.eavesdrop,!1);break;default:t.addEventListener("keyup",this.eavesdrop,!1)}}),this.runComputed(),this.runConditionals(),this.target.removeAttribute("twins-cloak")},this.eavesdrop=(t=>{var e=t.srcElement;this.updateState(e)}),this.makeReactive=((t,e)=>{var i=this;let s=t[e];Object.defineProperty(t,e,{get:()=>s,set(r){s=r,i.notify(t,e)}})}),this.updateState=(t=>{let e=t.getAttribute("twins"),i=t.value;"checkbox"==t.type&&(i=t.checked),console.log("HIT"),this.state[e]=i}),this.notify=((t,e)=>{this.target.querySelectorAll('[twins="'+e+'"]').forEach(i=>{if(null==i.type)if(null!==i.getAttribute("twins-filter")){let r=i.getAttribute("twins-filter");var s=this.filters[r](t[e]);i.innerHTML=s}else i.innerHTML=t[e]}),this.runComputed(),this.runConditionals()}),this.runComputed=(()=>{if(Object.keys(this.computed).length>0)for(let e in this.computed)if(this.computed.hasOwnProperty(e)){var t=this.computed[e]();this.target.querySelectorAll('[twins="'+e+'"]').forEach(e=>{if(null!==e.getAttribute("twins-filter")){let s=e.getAttribute("twins-filter");var i=this.filters[s](t);e.innerHTML=i}else e.innerHTML=t})}}),this.runConditionals=(()=>{var t=document.querySelectorAll("[twins-if]");if(null==t)return!1;t.forEach(t=>{var e=t.getAttribute("twins-if"),i=!1;e&&0==e.indexOf("!")&&(e=e.substring(1),i=!0);var s=this.state[e];void 0===s&&void 0!==this.computed[e]&&(s=this.computed[e]()),i&&(s=!s),t.style.display=s?"block":"none"})}),this.destroy=(()=>{this.target.querySelectorAll("[twins]").forEach(t=>{if(void 0!==t.type)switch(t.type){case"checkbox":case"select-one":case"select-multiple":case"radio":t.removeEventListener("change",this.eavesdrop,!1);break;default:t.removeEventListener("keyup",this.eavesdrop,!1)}})})}
